# Codebase Structure

**Analysis Date:** 2026-01-06

## Directory Layout

```
makerblocks/
├── makerblocks.php          # Plugin entry (constants, module loader)
├── package.json             # npm scripts, dependencies
├── .editorconfig            # Editor formatting rules
├── src/                     # Source code (pre-build)
│   ├── blocks-dev/          # 33 block development directories
│   ├── components/          # Shared React components
│   ├── scripts/             # Frontend scripts (hydration)
│   ├── styles/              # Sass 7-1 architecture
│   └── utils/               # Shared utilities
├── blocks/                  # Compiled blocks (generated)
├── assets/                  # Compiled assets (generated)
│   ├── js/                  # Bundled scripts
│   ├── css/                 # Compiled styles
│   ├── admin/               # Admin-specific assets
│   └── fonts/               # Bootstrap Icons font
├── inc/                     # PHP modules
├── tests/                   # Test suite
└── vendor/                  # PHP dependencies (Carbon Fields)
```

## Directory Purposes

**src/blocks-dev/**
- Purpose: Block development source files
- Contains: 33 block directories, each with 5-file pattern
- Key files: `services/Services.jsx`, `contact-form/ContactForm.jsx`
- Subdirectories: Complex blocks have `components/`, `hooks/`, `utils/`

**src/components/**
- Purpose: Shared React components
- Contains: UI library (Button, Badge, IconPicker, SkeletonLoader)
- Key files: `index.js` (barrel export), `ui/Button.jsx`, `ui/Badge.jsx`
- Subdirectories: `ui/`, `FilterPanel/`, `SkeletonLoader/`

**src/scripts/**
- Purpose: Frontend JavaScript (hydration, events)
- Contains: `MakerBlocks.js` (component registry), `index.js` (entry)
- Key files: `MakerBlocks.js` - 27 registered components

**src/styles/**
- Purpose: Sass 7-1 architecture
- Contains: SCSS partials organized by type
- Subdirectories: `abstracts/`, `base/`, `layout/`, `components/`, `pages/`, `vendors/`
- Key files: `styles.scss` (main entry)

**src/utils/**
- Purpose: Shared utility functions
- Contains: `contactUtils.js`, `formatters.js`, `urlFilters.js`
- Key files: Formatting, validation, URL building helpers

**blocks/**
- Purpose: Compiled blocks (generated by wp-scripts)
- Contains: 33 compiled block directories
- Key files: `{block}/index.js`, `{block}/index.asset.php`, `{block}/render.php`
- Source: Built from `src/blocks-dev/`

**assets/**
- Purpose: Compiled frontend assets
- Contains: Bundled JS, CSS, fonts, images
- Key files: `js/index.js`, `css/styles.css`

**inc/**
- Purpose: PHP modules loaded by plugin
- Contains: WordPress hooks, registration, helpers
- Key files: `blocks.php`, `enqueue_assets.php`, `wp_localize.php`, `helpers.php`

**tests/**
- Purpose: Test suite
- Contains: `validate-block-structure.js`
- Key files: Block structure validator (5-file pattern check)

## Key File Locations

**Entry Points:**
- `makerblocks.php` - Plugin initialization
- `src/scripts/MakerBlocks.js` - Frontend hydration class
- `inc/blocks.php` - Block registration

**Configuration:**
- `package.json` - npm scripts and dependencies
- `.editorconfig` - Editor settings

**Core Logic:**
- `inc/blocks.php` - Block registration, categories, allowed types
- `inc/enqueue_assets.php` - Asset management
- `inc/wp_localize.php` - JS data injection (`window.siteData`)
- `inc/helpers.php` - Utility functions

**Testing:**
- `tests/validate-block-structure.js` - Block structure validation

## Naming Conventions

**Files:**
- `PascalCase.jsx` for React components (`Services.jsx`, `ContactForm.jsx`)
- `kebab-case` for block directories (`contact-form/`, `hero-section/`)
- `snake_case.php` for PHP files (`enqueue_assets.php`)

**Directories:**
- `kebab-case` for all directories
- Plural for collections (`blocks/`, `components/`, `scripts/`)

**Special Patterns:**
- `_template/` - Block scaffold (excluded from validation)
- `*.asset.php` - wp-scripts generated dependency files
- `index.js` - Barrel exports and entry points

## Where to Add New Code

**New Block:**
- Primary code: `src/blocks-dev/{block-name}/`
- Files: `block.json`, `index.js`, `edit.js`, `{BlockName}.jsx`, `render.php`
- Registration: Add to `inc/blocks.php:makerblocks_get_custom_blocks()`
- Hydration: Register in `src/scripts/MakerBlocks.js` component registry

**New Shared Component:**
- Implementation: `src/components/{ComponentName}.jsx`
- Export: Add to `src/components/index.js`

**New Utility:**
- Implementation: `src/utils/{utilName}.js`
- Export: Add to `src/utils/index.js`

**New PHP Module:**
- Implementation: `inc/{module_name}.php`
- Loading: Add to `$includes` array in `makerblocks.php`

## Special Directories

**blocks/**
- Purpose: Compiled block output
- Source: Generated by `npm run wp-build-blocks`
- Committed: Yes (needed for WordPress)

**assets/js/, assets/css/**
- Purpose: Compiled frontend assets
- Source: Generated by build scripts
- Committed: Yes (needed for production)

**vendor/**
- Purpose: PHP dependencies (Carbon Fields)
- Source: Composer (manually committed)
- Committed: Yes

**node_modules/**
- Purpose: npm dependencies
- Source: `npm install`
- Committed: No (in .gitignore)

---

*Structure analysis: 2026-01-06*
*Update when directory structure changes*
